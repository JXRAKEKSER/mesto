(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var t=function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._userNameSelector=e,this._userAboutSelector=n,this._userName=document.querySelector(".".concat(e)),this._userAbout=document.querySelector(".".concat(n))}var n,o;return n=t,o=[{key:"getUserInfo",value:function(){var e={};return e.fio=this._userName.textContent,e.aboutYourself=this._userAbout.textContent,e}},{key:"setUserInfo",value:function(e){this._userName.textContent=e.fio,this._userAbout.textContent=e.aboutYourself}}],o&&e(n.prototype,o),t}();function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupSelector=t,this._popup=document.querySelector(".".concat(t))}var t,o;return t=e,(o=[{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"open",value:function(){this._popup.classList.add("popup_opened")}},{key:"close",value:function(){this._popup.classList.remove("popup_opened")}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("click",(function(t){(t.target.classList.contains("popup__button-close")||t.target.classList.contains("popup"))&&e.close()})),document.querySelector(".page").addEventListener("keydown",(function(t){e._handleEscClose(t)}))}}])&&n(t.prototype,o),e}();function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,t,n){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}},u(e,t,n||e)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function c(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(p,e);var t,n,o,r,l=(o=p,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=s(o);if(r){var n=s(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return c(this,e)});function p(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),l.call(this,e)}return t=p,(n=[{key:"open",value:function(e,t){u(s(p.prototype),"open",this).call(this),this._popup.querySelector(".popup__photo").src=e,this._popup.querySelector(".popup__photo-name").textContent=t}}])&&i(t.prototype,n),p}(o);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function f(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function d(e,t,n){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}},d(e,t,n||e)}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}function h(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(u,e);var t,n,o,r,i=(o=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_(o);if(r){var n=_(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return h(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._setValidation=t,n}return t=u,(n=[{key:"_getInputValue",value:function(){var e={};return Array.from(this._popup.querySelectorAll(".popup__input")).forEach((function(t){e[t.name]=t.value})),e}},{key:"setEventListeners",value:function(){var e=this;d(_(u.prototype),"setEventListeners",this).call(this),this._popup.addEventListener("submit",(function(t){e._setValidation(e._getInputValue()),e.close()}))}},{key:"close",value:function(){d(_(u.prototype),"close",this).call(this),this._popup.querySelector(".popup__form").reset()}}])&&f(t.prototype,n),u}(o);function m(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var b=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._templateSelector=n,this._src=t.mestoURL,this._alt="Каринка ".concat(t.mestoName),this._textContent=t.mestoName,this._openPopup=t.openPopup}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0)}},{key:"createCard",value:function(){this._card=this._getTemplate(),this._setEventListeners();var e=this._card.querySelector(".element__photo"),t=this._card.querySelector(".element__title");return e.src=this._src,e.alt=this._alt,t.textContent=this._textContent,this._card}},{key:"_handleOpenWithPhoto",value:function(){this._openPopup(this._src,this._textContent)}},{key:"_handleAddLike",value:function(){this._card.querySelector(".element__like").classList.toggle("element__like_active")}},{key:"_handleRemoveCard",value:function(){this._card.remove(),this._card=null}},{key:"_setEventListeners",value:function(){var e=this;this._card.querySelector(".element__like").addEventListener("click",(function(){e._handleAddLike()})),this._card.querySelector(".element__trash").addEventListener("click",(function(){e._handleRemoveCard()})),this._card.querySelector(".element__photo").addEventListener("click",(function(){e._handleOpenWithPhoto()}))}}])&&m(t.prototype,n),e}();function g(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var S=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._form=n,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._inputList=n.querySelectorAll(".".concat(t.inputSelector)),this._submitButton=n.querySelector(".".concat(t.submitButtonSelector))}var t,n;return t=e,(n=[{key:"_isValid",value:function(e){return e.validity.valid}},{key:"_hasValidationFaild",value:function(){var e=this;return Array.from(this._inputList).some((function(t){return!e._isValid(t)}))}},{key:"_showErrorMessage",value:function(e){var t=this._form.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage}},{key:"_hideErrorMessage",value:function(e){var t=this._form.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.textContent=""}},{key:"_changeValidateState",value:function(e){this._isValid(e)?this._hideErrorMessage(e):this._showErrorMessage(e)}},{key:"_setInputListeners",value:function(){var e=this;this.toogleSubmitButton(),Array.from(this._inputList).forEach((function(t){t.addEventListener("input",(function(n){e._changeValidateState(t),e.toogleSubmitButton()}))}))}},{key:"toogleSubmitButton",value:function(){this._hasValidationFaild()?(this._submitButton.disabled=!0,this._submitButton.classList.add(this._inactiveButtonClass)):(this._submitButton.disabled=!1,this._submitButton.classList.remove(this._inactiveButtonClass))}},{key:"getForm",value:function(){return this._form}},{key:"enableValidation",value:function(){this._setInputListeners()}}])&&g(t.prototype,n),e}();function k(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var w=function(){function e(t,n){var o=t.items,r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=o,this._renderer=r,this._containerSelector=n,this._container=document.querySelector(".".concat(n))}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(){var e=this;this._items.forEach((function(t){e.addItem(e._renderer(t))}))}}])&&k(t.prototype,n),e}(),E=document.querySelector(".profile-info__button-edit"),L=document.querySelector(".popup_type_profile .popup__form"),C=document.querySelector(".profile__button-add"),O=document.querySelector(".popup_type_card-add .popup__form"),j={inputSelector:"popup__input",submitButtonSelector:"popup__button-save",inactiveButtonClass:"popup__button-save_inactive",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error-info"},P=document.querySelector("input[name=fio]"),q=document.querySelector("input[name=aboutYourself]"),R=new S(j,L),B=new S(j,O);function x(e){return new b(e,"#card").createCard()}B.enableValidation(),R.enableValidation(),E.addEventListener("click",(function(){var e=V.getUserInfo(),t=e.fio,n=e.aboutYourself;P.value=t,q.value=n,T.open()})),C.addEventListener("click",(function(){B.toogleSubmitButton(),N.open()}));var V=new t("profile-info__name","profile-info__role"),I=new l("popup_type_picture");I.setEventListeners();var N=new v("popup_type_card-add",(function(e){e.openPopup=I.open.bind(I),A.addItem(x(e))}));N.setEventListeners();var T=new v("popup_type_profile",(function(e){V.setUserInfo(e)}));T.setEventListeners();var A=new w({items:[{mestoName:"Архыз",mestoURL:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{mestoName:"Челябинская область",mestoURL:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{mestoName:"Иваново",mestoURL:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{mestoName:"Камчатка",mestoURL:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{mestoName:"Холмогорский район",mestoURL:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{mestoName:"Байкал",mestoURL:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:function(e){return e.openPopup=I.open.bind(I),x(e)}},"elements");A.renderItems(),Array.from(document.forms).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()}))}))})();